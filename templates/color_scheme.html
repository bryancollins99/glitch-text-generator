{% extends 'base.html' %}

{% block title %}Color Scheme Generator - Create Beautiful Color Palettes{% endblock %}

{% block head %}
<meta name="description" content="Generate beautiful color schemes and palettes with our free color scheme generator. Create complementary, monochromatic, triadic, and custom color combinations.">
<meta name="keywords" content="color scheme generator, color palette, design colors, hex color picker, color combinations, color theory">
{% endblock %}

{% block extra_css %}
<style>
:root {
    --color-primary: #6c63ff;
    --color-secondary: #ff6584;
    --color-accent: #00d8ff;
    --color-light: #f8f9fa;
    --color-dark: #2c3e50;
    --color-success: #2ecc71;
}

.color-container {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    min-height: 100vh;
    padding: 2rem;
}

.color-header {
    text-align: center;
    margin-bottom: 3rem;
    color: white;
}

.color-title {
    font-size: 3rem;
    margin-bottom: 1rem;
    background: linear-gradient(45deg, #6c63ff, #ff6584, #00d8ff);
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    letter-spacing: 2px;
    font-weight: bold;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
}

.color-subtitle {
    font-size: 1.2rem;
    opacity: 0.9;
    margin-bottom: 2rem;
}

.color-main {
    max-width: 1200px;
    margin: 0 auto;
    background: rgba(255, 255, 255, 0.95);
    border-radius: 20px;
    padding: 2rem;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
}

.color-controls {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
    margin-bottom: 2rem;
}

.control-section {
    background: white;
    border-radius: 10px;
    padding: 1rem;
    border: 2px solid var(--color-light);
    text-align: center;
}

.control-section h3 {
    color: var(--color-primary);
    margin-bottom: 1rem;
    font-size: 1.1rem;
}

.color-input {
    width: 100%;
    height: 50px;
    border: 2px solid var(--color-light);
    border-radius: 5px;
    cursor: pointer;
    margin-bottom: 0.5rem;
}

.scheme-selector {
    width: 100%;
    padding: 0.5rem;
    border: 2px solid var(--color-light);
    border-radius: 5px;
    font-size: 1rem;
}

.generate-btn {
    background: var(--color-primary);
    color: white;
    border: none;
    padding: 1rem 2rem;
    border-radius: 25px;
    font-size: 1rem;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s ease;
    width: 100%;
    margin-top: 1rem;
}

.generate-btn:hover {
    background: var(--color-secondary);
    transform: translateY(-2px);
}

.palette-display {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
    margin-bottom: 2rem;
}

.color-card {
    background: white;
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    transition: transform 0.3s ease;
}

.color-card:hover {
    transform: translateY(-5px);
}

.color-preview {
    height: 120px;
    width: 100%;
    cursor: pointer;
    position: relative;
    transition: all 0.3s ease;
}

.color-preview:hover {
    filter: brightness(1.1);
}

.color-info {
    padding: 1rem;
    text-align: center;
}

.color-hex {
    font-size: 1.1rem;
    font-weight: bold;
    color: var(--color-dark);
    margin-bottom: 0.5rem;
    font-family: 'Monaco', monospace;
}

.color-rgb {
    font-size: 0.9rem;
    color: #666;
    margin-bottom: 0.5rem;
}

.copy-btn {
    background: var(--color-accent);
    color: white;
    border: none;
    padding: 0.5rem 1rem;
    border-radius: 15px;
    font-size: 0.8rem;
    cursor: pointer;
    transition: all 0.3s ease;
}

.copy-btn:hover {
    background: var(--color-success);
}

.export-section {
    background: white;
    border-radius: 10px;
    padding: 1.5rem;
    margin-top: 2rem;
    border: 2px solid var(--color-light);
}

.export-section h3 {
    color: var(--color-primary);
    margin-bottom: 1rem;
}

.export-buttons {
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
    justify-content: center;
}

.export-btn {
    background: var(--color-dark);
    color: white;
    border: none;
    padding: 0.8rem 1.5rem;
    border-radius: 20px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.export-btn:hover {
    background: var(--color-primary);
}

.info-section {
    background: rgba(108, 99, 255, 0.05);
    border-radius: 10px;
    padding: 1.5rem;
    margin-top: 2rem;
    border-left: 4px solid var(--color-primary);
}

.info-section h3 {
    color: var(--color-primary);
    margin-bottom: 1rem;
}

.info-section ul {
    color: var(--color-dark);
    line-height: 1.6;
}

@media (max-width: 768px) {
    .color-controls {
        grid-template-columns: 1fr;
    }
    
    .palette-display {
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    }
    
    .color-title {
        font-size: 2rem;
    }
}
</style>
{% endblock %}

{% block content %}
<div class="color-container">
    <div class="color-header">
        <h1 class="color-title">Color Scheme Generator</h1>
        <p class="color-subtitle">Create beautiful color palettes for your design projects</p>
    </div>

    <div class="color-main">
        <div class="color-controls">
            <div class="control-section">
                <h3>Base Color</h3>
                <input type="color" id="baseColor" class="color-input" value="#6c63ff">
                <button class="generate-btn" onclick="generateRandomColor()">Random Color</button>
            </div>
            
            <div class="control-section">
                <h3>Color Harmony</h3>
                <select id="harmonyType" class="scheme-selector" onchange="generateScheme()">
                    <option value="monochromatic">Monochromatic</option>
                    <option value="complementary">Complementary</option>
                    <option value="triadic">Triadic</option>
                    <option value="analogous">Analogous</option>
                    <option value="split-complementary">Split Complementary</option>
                    <option value="tetradic">Tetradic</option>
                </select>
                <button class="generate-btn" onclick="generateScheme()">Generate Scheme</button>
            </div>
        </div>

        <div class="palette-display" id="paletteDisplay">
            <!-- Color cards will be generated here -->
        </div>

        <div class="export-section">
            <h3>Export Palette</h3>
            <div class="export-buttons">
                <button class="export-btn" onclick="exportAsCSSVars()">CSS Variables</button>
                <button class="export-btn" onclick="exportAsJSON()">JSON</button>
                <button class="export-btn" onclick="exportAsSCSS()">SCSS</button>
                <button class="export-btn" onclick="exportAsASE()">Adobe ASE</button>
            </div>
        </div>

        <div class="info-section">
            <h3>About Color Schemes</h3>
            <p>Color schemes are fundamental to good design. Each harmony type creates different visual effects:</p>
            <ul>
                <li><strong>Monochromatic:</strong> Uses one color with varying shades and tints for elegant, cohesive designs</li>
                <li><strong>Complementary:</strong> Opposite colors on the color wheel for high contrast and vibrant designs</li>
                <li><strong>Triadic:</strong> Three evenly spaced colors for balanced, vibrant, yet harmonious palettes</li>
                <li><strong>Analogous:</strong> Adjacent colors on the wheel for peaceful, comfortable designs</li>
                <li><strong>Split Complementary:</strong> A base color plus two adjacent to its complement for vibrant contrast</li>
                <li><strong>Tetradic:</strong> Four colors in two complementary pairs for rich, diverse palettes</li>
            </ul>
        </div>
    </div>
</div>

<script>
let currentPalette = [];

// Color conversion utilities
function hexToRgb(hex) {
    const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
    return result ? {
        r: parseInt(result[1], 16),
        g: parseInt(result[2], 16),
        b: parseInt(result[3], 16)
    } : null;
}

function rgbToHex(r, g, b) {
    return "#" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);
}

function hexToHsl(hex) {
    const rgb = hexToRgb(hex);
    const r = rgb.r / 255;
    const g = rgb.g / 255;
    const b = rgb.b / 255;

    const max = Math.max(r, g, b);
    const min = Math.min(r, g, b);
    let h, s, l = (max + min) / 2;

    if (max === min) {
        h = s = 0;
    } else {
        const d = max - min;
        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
        switch (max) {
            case r: h = (g - b) / d + (g < b ? 6 : 0); break;
            case g: h = (b - r) / d + 2; break;
            case b: h = (r - g) / d + 4; break;
        }
        h /= 6;
    }

    return [h * 360, s * 100, l * 100];
}

function hslToHex(h, s, l) {
    h /= 360;
    s /= 100;
    l /= 100;

    const hue2rgb = (p, q, t) => {
        if (t < 0) t += 1;
        if (t > 1) t -= 1;
        if (t < 1/6) return p + (q - p) * 6 * t;
        if (t < 1/2) return q;
        if (t < 2/3) return p + (q - p) * (2/3 - t) * 6;
        return p;
    };

    let r, g, b;

    if (s === 0) {
        r = g = b = l;
    } else {
        const q = l < 0.5 ? l * (1 + s) : l + s - l * s;
        const p = 2 * l - q;
        r = hue2rgb(p, q, h + 1/3);
        g = hue2rgb(p, q, h);
        b = hue2rgb(p, q, h - 1/3);
    }

    return rgbToHex(Math.round(r * 255), Math.round(g * 255), Math.round(b * 255));
}

// Color scheme generation functions
function generateMonochromatic(baseColor) {
    const [h, s, l] = hexToHsl(baseColor);
    return [
        hslToHex(h, s, Math.max(10, l - 40)),
        hslToHex(h, s, Math.max(20, l - 20)),
        baseColor,
        hslToHex(h, s, Math.min(80, l + 20)),
        hslToHex(h, s, Math.min(90, l + 40))
    ];
}

function generateComplementary(baseColor) {
    const [h, s, l] = hexToHsl(baseColor);
    const complementH = (h + 180) % 360;
    return [
        baseColor,
        hslToHex(complementH, s, l),
        hslToHex(h, s * 0.7, l * 1.2),
        hslToHex(complementH, s * 0.7, l * 1.2),
        hslToHex(h, s * 0.5, l * 0.8)
    ];
}

function generateTriadic(baseColor) {
    const [h, s, l] = hexToHsl(baseColor);
    return [
        baseColor,
        hslToHex((h + 120) % 360, s, l),
        hslToHex((h + 240) % 360, s, l),
        hslToHex(h, s * 0.6, l * 1.1),
        hslToHex((h + 120) % 360, s * 0.6, l * 1.1)
    ];
}

function generateAnalogous(baseColor) {
    const [h, s, l] = hexToHsl(baseColor);
    return [
        hslToHex((h - 30 + 360) % 360, s, l),
        hslToHex((h - 15 + 360) % 360, s, l),
        baseColor,
        hslToHex((h + 15) % 360, s, l),
        hslToHex((h + 30) % 360, s, l)
    ];
}

function generateSplitComplementary(baseColor) {
    const [h, s, l] = hexToHsl(baseColor);
    const complement = (h + 180) % 360;
    return [
        baseColor,
        hslToHex((complement - 30 + 360) % 360, s, l),
        hslToHex((complement + 30) % 360, s, l),
        hslToHex(h, s * 0.7, l * 1.1),
        hslToHex((complement - 30 + 360) % 360, s * 0.7, l * 1.1)
    ];
}

function generateTetradic(baseColor) {
    const [h, s, l] = hexToHsl(baseColor);
    return [
        baseColor,
        hslToHex((h + 90) % 360, s, l),
        hslToHex((h + 180) % 360, s, l),
        hslToHex((h + 270) % 360, s, l),
        hslToHex(h, s * 0.6, l * 1.1)
    ];
}

function generateScheme() {
    const baseColor = document.getElementById('baseColor').value;
    const harmonyType = document.getElementById('harmonyType').value;
    
    let colors = [];
    
    switch(harmonyType) {
        case 'monochromatic':
            colors = generateMonochromatic(baseColor);
            break;
        case 'complementary':
            colors = generateComplementary(baseColor);
            break;
        case 'triadic':
            colors = generateTriadic(baseColor);
            break;
        case 'analogous':
            colors = generateAnalogous(baseColor);
            break;
        case 'split-complementary':
            colors = generateSplitComplementary(baseColor);
            break;
        case 'tetradic':
            colors = generateTetradic(baseColor);
            break;
    }
    
    currentPalette = colors;
    displayPalette(colors);
}

function displayPalette(colors) {
    const paletteDisplay = document.getElementById('paletteDisplay');
    paletteDisplay.innerHTML = '';
    
    colors.forEach((color, index) => {
        const rgb = hexToRgb(color);
        const colorCard = document.createElement('div');
        colorCard.className = 'color-card';
        
        colorCard.innerHTML = `
            <div class="color-preview" style="background-color: ${color}" onclick="copyColor('${color}')"></div>
            <div class="color-info">
                <div class="color-hex">${color.toUpperCase()}</div>
                <div class="color-rgb">RGB(${rgb.r}, ${rgb.g}, ${rgb.b})</div>
                <button class="copy-btn" onclick="copyColor('${color}')">Copy HEX</button>
            </div>
        `;
        
        paletteDisplay.appendChild(colorCard);
    });
}

function generateRandomColor() {
    const randomColor = '#' + Math.floor(Math.random()*16777215).toString(16).padStart(6, '0');
    document.getElementById('baseColor').value = randomColor;
    generateScheme();
}

function copyColor(color) {
    navigator.clipboard.writeText(color).then(() => {
        showToast(`Copied ${color} to clipboard!`);
    });
}

function exportAsCSSVars() {
    let cssVars = ':root {\n';
    currentPalette.forEach((color, index) => {
        cssVars += `  --color-${index + 1}: ${color};\n`;
    });
    cssVars += '}';
    
    navigator.clipboard.writeText(cssVars).then(() => {
        showToast('CSS Variables copied to clipboard!');
    });
}

function exportAsJSON() {
    const json = JSON.stringify({
        palette: currentPalette,
        harmony: document.getElementById('harmonyType').value,
        base_color: document.getElementById('baseColor').value
    }, null, 2);
    
    navigator.clipboard.writeText(json).then(() => {
        showToast('JSON data copied to clipboard!');
    });
}

function exportAsSCSS() {
    let scss = '';
    currentPalette.forEach((color, index) => {
        scss += `$color-${index + 1}: ${color};\n`;
    });
    
    navigator.clipboard.writeText(scss).then(() => {
        showToast('SCSS variables copied to clipboard!');
    });
}

function exportAsASE() {
    showToast('ASE export coming soon! Use JSON for now.');
}

function showToast(message) {
    const toast = document.createElement('div');
    toast.className = 'toast show';
    toast.textContent = message;
    toast.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: var(--color-success);
        color: white;
        padding: 1rem 2rem;
        border-radius: 10px;
        z-index: 1000;
        box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    `;
    document.body.appendChild(toast);
    
    setTimeout(() => {
        toast.remove();
    }, 3000);
}

// Event listeners
document.getElementById('baseColor').addEventListener('change', generateScheme);

// Initial generation
generateScheme();
</script>
{% endblock %} 